import {TileMap} from './tileMap.mjs';

export class World {

    static worldSize = 17;

    static biomeIndex = ['water', 'ground', 'mountain', 'fuel'];
    static biomeList = [
        [[0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0], [0]],
        [[0], [1], [1], [1], [1], [2], [2], [2], [0], [2], [1], [1], [1], [1], [1], [1], [1], [0]],
        [[0], [1], [1], [1], [1], [2], [2], [2], [0], [2], [1], [1], [1], [1], [1], [1], [1], [1], [0]],
        [[0], [1], [1], [1], [1], [1], [2], [2], [0], [2], [2], [1], [1], [1], [3, 7], [1], [1], [1], [1], [0]],
        [[0], [1], [1], [1], [1], [1], [1], [2], [2], [0], [2], [2], [1], [1], [1], [1], [1], [1], [1], [1], [0]],
        [[0], [1], [1], [3, 7], [1], [1], [1], [1], [2], [0], [2], [2], [2], [1], [1], [1], [1], [1], [1], [2], [2], [0]],
        [[0], [1], [1], [1], [1], [1], [1], [1], [1], [0], [2], [2], [1], [1], [1], [1], [1], [1], [1], [2], [2], [2], [0]],
        [[0], [1], [1], [1], [1], [1], [1], [1], [1], [1], [0], [2], [2], [1], [1], [1], [1], [1], [1], [2], [2], [2], [2], [0]],
        [[0], [2], [1], [1], [1], [1], [1], [1], [1], [1], [2], [2], [2], [1], [1], [1], [1], [1], [1], [2], [2], [0], [0], [0], [0]],
        [[0], [0], [2], [2], [2], [2], [1], [1], [1], [1], [1], [2], [2], [2], [1], [1], [1], [1], [1], [0], [0], [0], [2], [2], [2], [0]],
        [[0], [2], [0], [2], [2], [2], [1], [1], [1], [1], [3, 14], [1], [1], [1], [1], [1], [3, 14], [1], [2], [0], [2], [2], [2], [2], [1], [1], [0]],
        [[0], [2], [2], [0], [0], [2], [2], [2], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [2], [2], [2], [2], [2], [2], [1], [1], [1], [0]],
        [[0], [2], [2], [2], [2], [0], [2], [2], [2], [2], [1], [1], [1], [1], [1], [1], [1], [1], [1], [2], [2], [2], [1], [2], [1], [1], [1], [1], [0]],
        [[0], [1], [2], [2], [2], [2], [0], [0], [2], [2], [1], [1], [1], [2], [1], [1], [2], [1], [1], [1], [2], [1], [1], [1], [1], [1], [1], [1], [1], [0]],
        [[0], [1], [1], [1], [1], [1], [1], [1], [2], [2], [1], [1], [1], [1], [2], [2], [2], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [3, 7], [1], [1], [0]],
        [[0], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [2], [2], [2], [2], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [1], [0]],
        [[0], [1], [1], [1], [1], [1], [1], [1], [1], [1], [3, 14], [1], [1], [2], [2], [2], [3, 21], [2], [2], [2], [1], [1], [3, 14], [1], [1], [1], [1], [1], [1], [1], [1], [1], [0]],
    ];

    #tileMap;

    #worldUI;

    constructor() {

        this.#tileMap = new TileMap(World.worldSize, World.biomeIndex, World.biomeList);

        this.#initUI();
    }

    #initUI() {
        let tilesDiv = document.createElement('div');
        tilesDiv.setAttribute('id', 'tilesDiv');

        this.#tileMap.getTileMapArray().forEach((tileArray, i) => {
            tileArray.forEach((tile, j) => {
                tilesDiv.append(tile.getUI().getDiv());
            });
        });

        this.#worldUI = tilesDiv;
    }

    getUI() {
        return this.#worldUI;
    }

    getTileMap() {
        return this.#tileMap;
    }

    getBiome(pos) {
        return this.#tileMap.getTile(pos).getBiome();
    }

    getEntity(pos) {
        return this.#tileMap.getTile(pos).getEntity();
    }

    setBiome(pos, biome) {
        this.#tileMap.getTile(pos).setBiome(biome);
    }

    setEntity(pos, entity) {
        this.#tileMap.getTile(pos).setEntity(entity);
    }
}